schema: '2.0'
stages:
  json2csv:
    cmd: python3 big/src/stages/json2csv.py params.yaml
    deps:
    - path: big/src/stages/json2csv.py
      md5: 8f36a7a0306756ba350cf1daf1663563
      size: 3153
    - path: data/interim/sl_hand_json
      md5: 1eff78fa2d600fb5911794963b7033e9.dir
      size: 1901410
      nfiles: 32
    - path: data/raw/sl_hand_label
      md5: dfdb04782cc2c520c1e403454fa8b168.dir
      size: 1690
      nfiles: 2
    outs:
    - path: data/interim/xyz_63f.csv
      md5: 2668ea335a3e330f2126a0e8b8fbbd36
      size: 1833849
  xyz2angle:
    cmd: python3 big/src/stages/xyz2angle.py params.yaml
    deps:
    - path: big/src/stages/xyz2angle.py
      md5: 5f6315adcd759b5dbea0fc8f408d0347
      size: 1093
    - path: data/interim/xyz_63f.csv
      md5: 2668ea335a3e330f2126a0e8b8fbbd36
      size: 1833849
    outs:
    - path: data/interim/angle_19f.csv
      md5: 219cd166402057a7c3977521cc480351
      size: 599781
  select_label:
    cmd: python3 big/src/stages/select_label.py params.yaml
    deps:
    - path: big/src/stages/select_label.py
      md5: 74a9bb8f9c698804e0e7ce5a85d618e0
      size: 1061
    - path: data/interim/angle_19f.csv
      md5: 219cd166402057a7c3977521cc480351
      size: 599781
    params:
      params.yaml:
        select_label.list_fsw_orientation:
        - '00'
        - '01'
    outs:
    - path: data/interim/angle_19f_handshape.csv
      md5: 696f6d024b041984694c7707787825b4
      size: 306352
  split_trainval_test:
    cmd: python3 big/src/stages/split_trainval_test.py params.yaml
    deps:
    - path: big/src/stages/split_trainval_test.py
      md5: 70d9e4966aefdc4f364b6f47ce9895ab
      size: 1722
    - path: data/interim/train_val_test.csv
      md5: c6a4c02cadd5ff7303ea12c2e9a7d332
      size: 168300
    params:
      params.yaml:
        split_trainval_test.random_state: 42
        split_trainval_test.test_size: 0.1
    outs:
    - path: data/processed/test.csv
      md5: a0c3e1f30007738c642f394da0144c07
      size: 17214
    - path: data/processed/train_val.csv
      md5: bfe08507f045cd3a2b380936099d2454
      size: 151394
  train_val_split:
    cmd: python3 big/src/stages/train_val_split.py params.yaml
    deps:
    - path: big/src/stages/train_val_split.py
      md5: 3edb888dfdd4cf9135cc03c67860ee9a
      size: 1513
    - path: data/processed/train_val.csv
      md5: bfe08507f045cd3a2b380936099d2454
      size: 151394
    params:
      params.yaml:
        train_val_split.random_state: 42
        train_val_split.val_size: 0.1
    outs:
    - path: data/processed/train.csv
      md5: ef4f3e14e8d01fa0cd014635f27bc141
      size: 136132
    - path: data/processed/val.csv
      md5: 2a846b7979408398b0864ea8c90c481b
      size: 15570
  select_features:
    cmd: python3 big/src/stages/select_features.py params.yaml
    deps:
    - path: big/src/stages/select_features.py
      md5: aeb474b4fc8d2877bb1acdade83124ca
      size: 2161
    - path: data/processed/test.csv
      md5: a0c3e1f30007738c642f394da0144c07
      size: 17214
    - path: data/processed/train.csv
      md5: ef4f3e14e8d01fa0cd014635f27bc141
      size: 136132
    - path: data/processed/val.csv
      md5: 2a846b7979408398b0864ea8c90c481b
      size: 15570
    outs:
    - path: data/processed/test_x.npy
      md5: 3f2eb97c64930c54f43c7d663b44971d
      size: 14264
    - path: data/processed/test_y.npy
      md5: 4b6dcc19732858cc000fbe49daa9b47a
      size: 495
    - path: data/processed/train_x.npy
      md5: 54fd5f521b82c544a8bbb97a9402a96f
      size: 113672
    - path: data/processed/train_y.npy
      md5: 4a403ebc4ec9b180f87a30551f13d742
      size: 1804
    - path: data/processed/val_x.npy
      md5: e73bbde8c7f2d0d5346566b6fd7df61f
      size: 12896
    - path: data/processed/val_y.npy
      md5: 81f7d266218e25a6f6f896d160b20f45
      size: 477
  to_categorical:
    cmd: python3 big/src/stages/to_categorical.py params.yaml
    deps:
    - path: big/src/stages/to_categorical.py
      md5: abe6a5e88b92572aec81cd32c2bd7e5e
      size: 2028
    - path: data/processed/test_y.npy
      md5: 4b6dcc19732858cc000fbe49daa9b47a
      size: 495
    - path: data/processed/train_y.npy
      md5: 4a403ebc4ec9b180f87a30551f13d742
      size: 1804
    - path: data/processed/val_y.npy
      md5: 81f7d266218e25a6f6f896d160b20f45
      size: 477
    outs:
    - path: data/processed/test_y_encoder.npy
      md5: 8a69c7ba3b61e5c019d009732e85985a
      size: 872
    - path: data/processed/train_y_encoder.npy
      md5: f7df52361e833d7844414c3ea5c4cf18
      size: 6104
    - path: data/processed/val_y_encoder.npy
      md5: 05eaec0a04954687f9a1f93ab7bc5e3e
      size: 800
    - path: models/skelet_hand_f19.json
      md5: 87a56a2619349785ef91a50059c21d35
      size: 71
  train:
    cmd: python3 big/src/stages/train.py params.yaml
    deps:
    - path: big/src/stages/train.py
      md5: 17efd98b9f1e732052f5b5821232a87b
      size: 3121
    - path: data/processed/train_x.npy
      md5: 54fd5f521b82c544a8bbb97a9402a96f
      size: 113672
    - path: data/processed/train_y_encoder.npy
      md5: f7df52361e833d7844414c3ea5c4cf18
      size: 6104
    - path: data/processed/val_x.npy
      md5: e73bbde8c7f2d0d5346566b6fd7df61f
      size: 12896
    - path: data/processed/val_y_encoder.npy
      md5: 05eaec0a04954687f9a1f93ab7bc5e3e
      size: 800
    params:
      params.yaml:
        train.epochs: 100
    outs:
    - path: models/skelet_hand_f19.h5
      md5: 0268608ed5de0615d390a6006ab2f0d8
      size: 56656
    - path: reports/train_history.csv
      md5: 6e685e0c1f25632c520b178db8e937c8
      size: 7993
  predict:
    cmd: python3 big/src/stages/predict.py params.yaml
    deps:
    - path: big/src/stages/predict.py
      md5: 2a495d577f3c153d20830c473894a5fa
      size: 3669
    - path: data/processed/test_x.npy
      md5: 3f2eb97c64930c54f43c7d663b44971d
      size: 14264
    - path: data/processed/train_x.npy
      md5: 54fd5f521b82c544a8bbb97a9402a96f
      size: 113672
    - path: data/processed/val_x.npy
      md5: e73bbde8c7f2d0d5346566b6fd7df61f
      size: 12896
    - path: models/skelet_hand_f19.h5
      md5: 0268608ed5de0615d390a6006ab2f0d8
      size: 56656
    outs:
    - path: data/processed/test_y_pred.npy
      md5: 4b6228cdea2803582087bb015168198a
      size: 1616
    - path: data/processed/test_y_pred_proba.npy
      md5: e5df129e453b5fb056400fc66001a717
      size: 1244
    - path: data/processed/train_y_pred.npy
      md5: 35d0440e22cbf975b302989f645a92d1
      size: 12080
    - path: data/processed/train_y_pred_proba.npy
      md5: ff78f72ef54d083dfc517f4a72f52705
      size: 9092
    - path: data/processed/val_y_pred.npy
      md5: 2a209c08534dfbb4b955e44ae54eb3ef
      size: 1472
    - path: data/processed/val_y_pred_proba.npy
      md5: 1ec7d9753fa989d90da316140669f4dd
      size: 1136
  evaluate:
    cmd: python3 big/src/stages/evaluate.py params.yaml
    deps:
    - path: big/src/stages/evaluate.py
      md5: 81288ca4feef6991282e43049c915ebd
      size: 7483
    - path: data/processed/test_y.npy
      md5: 4b6dcc19732858cc000fbe49daa9b47a
      size: 495
    - path: data/processed/test_y_pred.npy
      md5: 4b6228cdea2803582087bb015168198a
      size: 1616
    - path: data/processed/test_y_pred_proba.npy
      md5: e5df129e453b5fb056400fc66001a717
      size: 1244
    - path: data/processed/train_y.npy
      md5: 4a403ebc4ec9b180f87a30551f13d742
      size: 1804
    - path: data/processed/train_y_pred.npy
      md5: 35d0440e22cbf975b302989f645a92d1
      size: 12080
    - path: data/processed/train_y_pred_proba.npy
      md5: ff78f72ef54d083dfc517f4a72f52705
      size: 9092
    - path: data/processed/val_y.npy
      md5: 81f7d266218e25a6f6f896d160b20f45
      size: 477
    - path: data/processed/val_y_pred.npy
      md5: 2a209c08534dfbb4b955e44ae54eb3ef
      size: 1472
    - path: data/processed/val_y_pred_proba.npy
      md5: 1ec7d9753fa989d90da316140669f4dd
      size: 1136
    outs:
    - path: reports/test.json
      md5: 698b1ff921f263602c98247ba89edbf7
      size: 28
    - path: reports/train.json
      md5: d75c4cc219cf193fc5cc713fb02db218
      size: 30
    - path: reports/val.json
      md5: 528a43f7ce2baf23a3d7473e86a3173f
      size: 31
  app:
    cmd: python3 big/src/stages/app.py params.yaml
    deps:
    - path: big/src/stages/app.py
      md5: 2272564d30a3ab105969eee7615825e4
      size: 2805
    - path: data/raw/sl_hand
      md5: cfb3e3adb87ae3d064a5791e736a6658.dir
      size: 282910552
      nfiles: 32
    - path: models/skelet_hand_f19.h5
      md5: 0268608ed5de0615d390a6006ab2f0d8
      size: 56656
    - path: models/skelet_hand_f19.json
      md5: 87a56a2619349785ef91a50059c21d35
      size: 71
    outs:
    - path: reports/app.json
      md5: d49e2707b5b3b9bd9fa487e82342d65a
      size: 54
  reduce_label:
    cmd: python3 big/src/stages/reduce_label.py params.yaml
    deps:
    - path: big/src/stages/reduce_label.py
      md5: caba32dcca9162e450614bceaf749e17
      size: 2984
    - path: data/interim/angle_19f_handshape.csv
      md5: 696f6d024b041984694c7707787825b4
      size: 306352
    - path: data/raw/fsw_handshape.json
      md5: fc38ceb365ab6afea4697799bb89e3eb
      size: 76
    outs:
    - path: data/interim/reduce_label.csv
      md5: 4d66f810187b1f468b84fa8b578fb7d4
      size: 306352
  split_by_folder:
    cmd: python3 big/src/stages/split_by_folder.py params.yaml
    deps:
    - path: big/src/stages/split_by_folder.py
      md5: 13984d5af8ad4cd83fe505cf58673fc8
      size: 1046
    - path: data/interim/reduce_label.csv
      md5: 4d66f810187b1f468b84fa8b578fb7d4
      size: 306352
    outs:
    - path: data/interim/test2.csv
      md5: f775e0121b7f959ff931bd4413812c03
      size: 138360
    - path: data/interim/train_val_test.csv
      md5: c6a4c02cadd5ff7303ea12c2e9a7d332
      size: 168300
