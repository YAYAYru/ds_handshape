schema: '2.0'
stages:
  json2csv:
    cmd: python3 big/src/stages/json2csv.py params.yaml
    deps:
    - path: big/src/stages/json2csv.py
      md5: b67bf54ed41456835af5f3ced30662e1
      size: 3221
    - path: data/interim/sl_hand_json
      md5: 1eff78fa2d600fb5911794963b7033e9.dir
      size: 1901410
      nfiles: 32
    - path: data/raw/sl_hand_label
      md5: dfdb04782cc2c520c1e403454fa8b168.dir
      size: 1690
      nfiles: 2
    outs:
    - path: data/interim/xyz_63f.csv
      md5: 2668ea335a3e330f2126a0e8b8fbbd36
      size: 1833849
  xyz2angle:
    cmd: python3 big/src/stages/xyz2angle.py params.yaml
    deps:
    - path: big/src/stages/xyz2angle.py
      md5: 16942854f58554091bf1d255661e4184
      size: 1163
    - path: data/interim/xyz_63f.csv
      md5: 2668ea335a3e330f2126a0e8b8fbbd36
      size: 1833849
    outs:
    - path: data/interim/angle_19f.csv
      md5: 219cd166402057a7c3977521cc480351
      size: 599781
  select_label:
    cmd: python3 big/src/stages/select_label.py params.yaml
    deps:
    - path: big/src/stages/select_label.py
      md5: 74a9bb8f9c698804e0e7ce5a85d618e0
      size: 1061
    - path: data/interim/angle_19f.csv
      md5: 4a6abd697df77fd1ed9080c62b5e25e8
      size: 451786
    params:
      params.yaml:
        select_label.list_fsw_orientation:
        - '00'
        - '01'
    outs:
    - path: data/interim/angle_19f_handshape.csv
      md5: 0e5b6712888cb8888e25b8f02213d1fa
      size: 230117
  split_trainval_test:
    cmd: python3 big/src/stages/split_trainval_test.py params.yaml
    deps:
    - path: big/src/stages/split_trainval_test.py
      md5: 70d9e4966aefdc4f364b6f47ce9895ab
      size: 1722
    - path: data/interim/reduce_label.csv
      md5: 8c578c10abb6e630fce6b8f204c72199
      size: 230117
    params:
      params.yaml:
        split_trainval_test.random_state: 42
        split_trainval_test.test_size: 0.2
    outs:
    - path: data/processed/test.csv
      md5: e401b9e2c0b2017683a05dfa3760a6f6
      size: 46356
    - path: data/processed/train_val.csv
      md5: 7a4d20dd88cad66f93c50357dcc31115
      size: 184038
  train_val_split:
    cmd: python3 big/src/stages/train_val_split.py params.yaml
    deps:
    - path: big/src/stages/train_val_split.py
      md5: 586db4208d6d57e6f06af7cebe8a20a0
      size: 1602
    - path: data/processed/train_val.csv
      md5: 7a4d20dd88cad66f93c50357dcc31115
      size: 184038
    params:
      params.yaml:
        train_val_split.random_state: 42
        train_val_split.val_size: 0.2
    outs:
    - path: data/processed/train.csv
      md5: b4c94a95e6f0d8e0a7c4fe0a84d75ac4
      size: 147250
    - path: data/processed/val.csv
      md5: 93ea51b5646816c75157c644441a33f9
      size: 37065
  select_features:
    cmd: python3 big/src/stages/select_features.py params.yaml
    deps:
    - path: big/src/stages/select_features.py
      md5: 29b86632c1a26e7ce2aee0e6bb4844fc
      size: 2212
    - path: data/processed/test.csv
      md5: e401b9e2c0b2017683a05dfa3760a6f6
      size: 46356
    - path: data/processed/train.csv
      md5: b4c94a95e6f0d8e0a7c4fe0a84d75ac4
      size: 147250
    - path: data/processed/val.csv
      md5: 93ea51b5646816c75157c644441a33f9
      size: 37065
    outs:
    - path: data/processed/test_x.npy
      md5: a55cec827a0954b49e31fd22daa1cc4e
      size: 51656
    - path: data/processed/test_y.npy
      md5: fcfc3982207c03dd9f864655241250e6
      size: 988
    - path: data/processed/train_x.npy
      md5: 60966ac3c3a523c13f3a3fbea01d34db
      size: 164592
    - path: data/processed/train_y.npy
      md5: 6a840c9ce7d47c2a1d8f8adcb5e369e8
      size: 2476
    - path: data/processed/val_x.npy
      md5: 655610aa01c002f72251800c1773a097
      size: 41320
    - path: data/processed/val_y.npy
      md5: 712ab03c1671aee8680088330cf085e8
      size: 852
  to_categorical:
    cmd: python3 big/src/stages/to_categorical.py params.yaml
    deps:
    - path: big/src/stages/to_categorical.py
      md5: d6d1968c93ee1bce08837f95f4de338b
      size: 2123
    - path: data/processed/test_y.npy
      md5: fcfc3982207c03dd9f864655241250e6
      size: 988
    - path: data/processed/train_y.npy
      md5: 6a840c9ce7d47c2a1d8f8adcb5e369e8
      size: 2476
    - path: data/processed/val_y.npy
      md5: 712ab03c1671aee8680088330cf085e8
      size: 852
    outs:
    - path: data/processed/test_y_encoder.npy
      md5: 8dd263484acf12511ac1ac6109b5fb2c
      size: 2840
    - path: data/processed/train_y_encoder.npy
      md5: 64cb8d949bdd1ad4bcd55b79c999efc1
      size: 8784
    - path: data/processed/val_y_encoder.npy
      md5: 884dbab6814a754cba78fcf63cf291d9
      size: 2296
    - path: models/skelet_hand_f19.json
      md5: 87a56a2619349785ef91a50059c21d35
      size: 71
  train:
    cmd: python3 big/src/stages/train.py params.yaml
    deps:
    - path: big/src/stages/train.py
      md5: b14c9c35ad36076fcc1f76172cef92ac
      size: 3223
    - path: data/processed/train_x.npy
      md5: 60966ac3c3a523c13f3a3fbea01d34db
      size: 164592
    - path: data/processed/train_y_encoder.npy
      md5: 64cb8d949bdd1ad4bcd55b79c999efc1
      size: 8784
    - path: data/processed/val_x.npy
      md5: 655610aa01c002f72251800c1773a097
      size: 41320
    - path: data/processed/val_y_encoder.npy
      md5: 884dbab6814a754cba78fcf63cf291d9
      size: 2296
    params:
      params.yaml:
        train.epochs: 100
    outs:
    - path: models/skelet_hand_f19.h5
      md5: 5f5e60ca5a18c4b8ea8884d3bac82abb
      size: 56656
    - path: reports/train_history.csv
      md5: 376a6a585837673b85064267af021ec0
      size: 8009
  predict:
    cmd: python3 big/src/stages/predict.py params.yaml
    deps:
    - path: big/src/stages/predict.py
      md5: e5549ebba512079d46aaf7bf0bfd118d
      size: 3882
    - path: data/processed/test_x.npy
      md5: a55cec827a0954b49e31fd22daa1cc4e
      size: 51656
    - path: data/processed/train_x.npy
      md5: 60966ac3c3a523c13f3a3fbea01d34db
      size: 164592
    - path: data/processed/val_x.npy
      md5: 655610aa01c002f72251800c1773a097
      size: 41320
    - path: models/skelet_hand_f19.h5
      md5: 5f5e60ca5a18c4b8ea8884d3bac82abb
      size: 56656
    outs:
    - path: data/processed/test_y_pred.npy
      md5: 544b2524c032c153619b620f51e0018a
      size: 5552
    - path: data/processed/test_y_pred_proba.npy
      md5: fa53893c19fb888e8e0c5670974c83ca
      size: 4196
    - path: data/processed/train_y_pred.npy
      md5: 1991c82906ab088c61b1feeba1b583ae
      size: 17440
    - path: data/processed/train_y_pred_proba.npy
      md5: 05e6066851a7413744ab6e1ac2bc5d6f
      size: 13112
    - path: data/processed/val_y_pred.npy
      md5: 0a30a644a4dbdf6092cdff95e67b05a6
      size: 4464
    - path: data/processed/val_y_pred_proba.npy
      md5: f8bcde36520c282a732cb678e38acd35
      size: 3380
  evaluate:
    cmd: python3 big/src/stages/evaluate.py params.yaml
    deps:
    - path: big/src/stages/evaluate.py
      md5: ddd5641e8c822064d430fbb1655eb014
      size: 7647
    - path: data/processed/test_y.npy
      md5: fcfc3982207c03dd9f864655241250e6
      size: 988
    - path: data/processed/test_y_pred.npy
      md5: 544b2524c032c153619b620f51e0018a
      size: 5552
    - path: data/processed/test_y_pred_proba.npy
      md5: fa53893c19fb888e8e0c5670974c83ca
      size: 4196
    - path: data/processed/train_y.npy
      md5: 6a840c9ce7d47c2a1d8f8adcb5e369e8
      size: 2476
    - path: data/processed/train_y_pred.npy
      md5: 1991c82906ab088c61b1feeba1b583ae
      size: 17440
    - path: data/processed/train_y_pred_proba.npy
      md5: 05e6066851a7413744ab6e1ac2bc5d6f
      size: 13112
    - path: data/processed/val_y.npy
      md5: 712ab03c1671aee8680088330cf085e8
      size: 852
    - path: data/processed/val_y_pred.npy
      md5: 0a30a644a4dbdf6092cdff95e67b05a6
      size: 4464
    - path: data/processed/val_y_pred_proba.npy
      md5: f8bcde36520c282a732cb678e38acd35
      size: 3380
    outs:
    - path: reports/test.json
      md5: ad6f0119a7473a256f3b9878e5b2f572
      size: 31
    - path: reports/train.json
      md5: cdb0a51e11df83645e128fbd3667c48d
      size: 31
    - path: reports/val.json
      md5: db283f20cae8f47e4cbcf4920df43de6
      size: 31
  app:
    cmd: python3 big/src/stages/app.py params.yaml
    deps:
    - path: big/src/stages/app.py
      md5: 7b6928167889073ce781df96383cd9f6
      size: 2947
    - path: data/raw/sl_hand
      md5: cfb3e3adb87ae3d064a5791e736a6658.dir
      size: 282910552
      nfiles: 32
    - path: models/skelet_hand_f19.h5
      md5: 5f5e60ca5a18c4b8ea8884d3bac82abb
      size: 56656
    - path: models/skelet_hand_f19.json
      md5: 87a56a2619349785ef91a50059c21d35
      size: 71
    outs:
    - path: reports/app.json
      md5: e9abd1bf96dfec1a81fbea9c57da703d
      size: 54
  reduce_label:
    cmd: python3 big/src/stages/reduce_label.py params.yaml
    deps:
    - path: big/src/stages/reduce_label.py
      md5: caba32dcca9162e450614bceaf749e17
      size: 2984
    - path: data/interim/angle_19f_handshape.csv
      md5: 0e5b6712888cb8888e25b8f02213d1fa
      size: 230117
    - path: data/raw/fsw_handshape.json
      md5: fc38ceb365ab6afea4697799bb89e3eb
      size: 76
    outs:
    - path: data/interim/reduce_label.csv
      md5: 8c578c10abb6e630fce6b8f204c72199
      size: 230117
