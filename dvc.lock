schema: '2.0'
stages:
  json2csv:
    cmd: python3 big/src/stages/json2csv.py params.yaml
    deps:
    - path: big/src/stages/json2csv.py
      md5: 8f36a7a0306756ba350cf1daf1663563
      size: 3153
    - path: data/interim/sl_hand_json
      md5: 1eff78fa2d600fb5911794963b7033e9.dir
      size: 1901410
      nfiles: 32
    - path: data/raw/sl_hand_label
      md5: dfdb04782cc2c520c1e403454fa8b168.dir
      size: 1690
      nfiles: 2
    outs:
    - path: data/interim/xyz_63f.csv
      md5: 2668ea335a3e330f2126a0e8b8fbbd36
      size: 1833849
  xyz2angle:
    cmd: python3 big/src/stages/xyz2angle.py params.yaml
    deps:
    - path: big/src/stages/xyz2angle.py
      md5: 5f6315adcd759b5dbea0fc8f408d0347
      size: 1093
    - path: data/interim/xyz_63f.csv
      md5: 2668ea335a3e330f2126a0e8b8fbbd36
      size: 1833849
    outs:
    - path: data/interim/angle_19f.csv
      md5: 219cd166402057a7c3977521cc480351
      size: 599781
  select_label:
    cmd: python3 big/src/stages/select_label.py params.yaml
    deps:
    - path: big/src/stages/select_label.py
      md5: 74a9bb8f9c698804e0e7ce5a85d618e0
      size: 1061
    - path: data/interim/angle_19f.csv
      md5: 219cd166402057a7c3977521cc480351
      size: 599781
    params:
      params.yaml:
        select_label.list_fsw_orientation:
        - '00'
        - '01'
    outs:
    - path: data/interim/angle_19f_handshape.csv
      md5: 696f6d024b041984694c7707787825b4
      size: 306352
  split_trainval_test:
    cmd: python3 big/src/stages/split_trainval_test.py params.yaml
    deps:
    - path: big/src/stages/split_trainval_test.py
      md5: 70d9e4966aefdc4f364b6f47ce9895ab
      size: 1722
    - path: data/interim/train_val_test_balance.csv
      md5: 009b90a7b1365b4254f6a12b0834e5cb
      size: 88321
    params:
      params.yaml:
        split_trainval_test.random_state: 42
        split_trainval_test.test_size: 0.1
    outs:
    - path: data/processed/test.csv
      md5: 15b14975890fece814c524ad4a017aaa
      size: 9103
    - path: data/processed/train_val.csv
      md5: 16233b276c0acade7efb46a7055e068d
      size: 79495
  train_val_split:
    cmd: python3 big/src/stages/train_val_split.py params.yaml
    deps:
    - path: big/src/stages/train_val_split.py
      md5: 3edb888dfdd4cf9135cc03c67860ee9a
      size: 1513
    - path: data/processed/train_val.csv
      md5: 16233b276c0acade7efb46a7055e068d
      size: 79495
    params:
      params.yaml:
        train_val_split.random_state: 42
        train_val_split.val_size: 0.1
    outs:
    - path: data/processed/train.csv
      md5: 3e67b8d1e79623b0d89c0068a1db586a
      size: 71471
    - path: data/processed/val.csv
      md5: c3c56fbe34b412a7c0370361f9818013
      size: 8301
  select_features:
    cmd: python3 big/src/stages/select_features.py params.yaml
    deps:
    - path: big/src/stages/select_features.py
      md5: b869d067c8e9682d55f348e31a474e15
      size: 2556
    - path: data/interim/test2.csv
      md5: f775e0121b7f959ff931bd4413812c03
      size: 138360
    - path: data/processed/test.csv
      md5: 15b14975890fece814c524ad4a017aaa
      size: 9103
    - path: data/processed/train.csv
      md5: 3e67b8d1e79623b0d89c0068a1db586a
      size: 71471
    - path: data/processed/val.csv
      md5: c3c56fbe34b412a7c0370361f9818013
      size: 8301
    outs:
    - path: data/processed/test2_x.npy
      md5: c39b0a6cb68aa178a4d00ee08288d745
      size: 116864
    - path: data/processed/test2_y.npy
      md5: 093c3a22b39b7a394dfcf397bbd41d8a
      size: 1846
    - path: data/processed/test_x.npy
      md5: 5dfb0f7c24c0515fe27dd9679ee5a5af
      size: 10008
    - path: data/processed/test_y.npy
      md5: 83e8a06bf33548750686f2f3fe63b92d
      size: 439
    - path: data/processed/train_x.npy
      md5: b7edb2d898603cc52e64ec865b8e4cb6
      size: 79776
    - path: data/processed/train_y.npy
      md5: b5ac586fae4099a2769cda642a28cc96
      size: 1358
    - path: data/processed/val_x.npy
      md5: cd4c6b14afdd647b2713b3586e9b8d44
      size: 9096
    - path: data/processed/val_y.npy
      md5: 92a56c27cd8be46382ae5522feeb64ed
      size: 427
  to_categorical:
    cmd: python3 big/src/stages/to_categorical.py params.yaml
    deps:
    - path: big/src/stages/to_categorical.py
      md5: 56e2e61ee1e82b3fe07f51c7e6da59e4
      size: 2397
    - path: data/processed/test2_y.npy
      md5: 093c3a22b39b7a394dfcf397bbd41d8a
      size: 1846
    - path: data/processed/test_y.npy
      md5: 83e8a06bf33548750686f2f3fe63b92d
      size: 439
    - path: data/processed/train_y.npy
      md5: b5ac586fae4099a2769cda642a28cc96
      size: 1358
    - path: data/processed/val_y.npy
      md5: 92a56c27cd8be46382ae5522feeb64ed
      size: 427
    outs:
    - path: data/processed/test2_y_encoder.npy
      md5: 80d0b0ace20f6cd40dbe119039ef258b
      size: 6272
    - path: data/processed/test_y_encoder.npy
      md5: 369d647e443fdfa534197bede289ecab
      size: 648
    - path: data/processed/train_y_encoder.npy
      md5: 82a63634f488b88a3162dd55abfc68c6
      size: 4320
    - path: data/processed/val_y_encoder.npy
      md5: 5f1500feca52b02bac830b343b81fdc3
      size: 600
    - path: models/skelet_hand_f19.json
      md5: 87a56a2619349785ef91a50059c21d35
      size: 71
  train:
    cmd: python3 big/src/stages/train.py params.yaml
    deps:
    - path: big/src/stages/train.py
      md5: 17efd98b9f1e732052f5b5821232a87b
      size: 3121
    - path: data/processed/train_x.npy
      md5: b7edb2d898603cc52e64ec865b8e4cb6
      size: 79776
    - path: data/processed/train_y_encoder.npy
      md5: 82a63634f488b88a3162dd55abfc68c6
      size: 4320
    - path: data/processed/val_x.npy
      md5: cd4c6b14afdd647b2713b3586e9b8d44
      size: 9096
    - path: data/processed/val_y_encoder.npy
      md5: 5f1500feca52b02bac830b343b81fdc3
      size: 600
    params:
      params.yaml:
        train.epochs: 100
    outs:
    - path: models/skelet_hand_f19.h5
      md5: d04866b7877c6a6743e47cf9fe6d614a
      size: 56656
    - path: reports/train_history.csv
      md5: 4077e7e32655cb9ef7acdb053c2c1045
      size: 7519
  predict:
    cmd: python3 big/src/stages/predict.py params.yaml
    deps:
    - path: big/src/stages/predict.py
      md5: d9b5fdae0131b7d8eaa753a5b3b239b4
      size: 4356
    - path: data/processed/test2_x.npy
      md5: c39b0a6cb68aa178a4d00ee08288d745
      size: 116864
    - path: data/processed/test_x.npy
      md5: 5dfb0f7c24c0515fe27dd9679ee5a5af
      size: 10008
    - path: data/processed/train_x.npy
      md5: b7edb2d898603cc52e64ec865b8e4cb6
      size: 79776
    - path: data/processed/val_x.npy
      md5: cd4c6b14afdd647b2713b3586e9b8d44
      size: 9096
    - path: models/skelet_hand_f19.h5
      md5: d04866b7877c6a6743e47cf9fe6d614a
      size: 56656
    outs:
    - path: data/processed/test2_y_pred.npy
      md5: 02d6ed23d6c69e9a71cd5116263d3b07
      size: 12416
    - path: data/processed/test2_y_pred_proba.npy
      md5: 27a6303b9829b43fd1c1b67c4ec96a05
      size: 9344
    - path: data/processed/test_y_pred.npy
      md5: 6f4a20e06964ae3a78c126db99b5e64d
      size: 1168
    - path: data/processed/test_y_pred_proba.npy
      md5: c50a8b33503cd46f2aba08691293757b
      size: 908
    - path: data/processed/train_y_pred.npy
      md5: 70be37364af35e0a217dc52a363494cb
      size: 8512
    - path: data/processed/train_y_pred_proba.npy
      md5: 79f9360c68863ab5446c0840150d1d4d
      size: 6416
    - path: data/processed/val_y_pred.npy
      md5: 30d5fca3c5d416e3b0cfa09fe9079fe5
      size: 1072
    - path: data/processed/val_y_pred_proba.npy
      md5: 152ac06bb76ed92c5b1bcd1a2a62779b
      size: 836
  evaluate:
    cmd: python3 big/src/stages/evaluate.py params.yaml
    deps:
    - path: big/src/stages/evaluate.py
      md5: 64fc67e2701ad4b10ad50217913a608b
      size: 9018
    - path: data/processed/test2_y.npy
      md5: 093c3a22b39b7a394dfcf397bbd41d8a
      size: 1846
    - path: data/processed/test2_y_pred.npy
      md5: 02d6ed23d6c69e9a71cd5116263d3b07
      size: 12416
    - path: data/processed/test2_y_pred_proba.npy
      md5: 27a6303b9829b43fd1c1b67c4ec96a05
      size: 9344
    - path: data/processed/test_y.npy
      md5: 83e8a06bf33548750686f2f3fe63b92d
      size: 439
    - path: data/processed/test_y_pred.npy
      md5: 6f4a20e06964ae3a78c126db99b5e64d
      size: 1168
    - path: data/processed/test_y_pred_proba.npy
      md5: c50a8b33503cd46f2aba08691293757b
      size: 908
    - path: data/processed/train_y.npy
      md5: b5ac586fae4099a2769cda642a28cc96
      size: 1358
    - path: data/processed/train_y_pred.npy
      md5: 70be37364af35e0a217dc52a363494cb
      size: 8512
    - path: data/processed/train_y_pred_proba.npy
      md5: 79f9360c68863ab5446c0840150d1d4d
      size: 6416
    - path: data/processed/val_y.npy
      md5: 92a56c27cd8be46382ae5522feeb64ed
      size: 427
    - path: data/processed/val_y_pred.npy
      md5: 30d5fca3c5d416e3b0cfa09fe9079fe5
      size: 1072
    - path: data/processed/val_y_pred_proba.npy
      md5: 152ac06bb76ed92c5b1bcd1a2a62779b
      size: 836
    outs:
    - path: reports/test.json
      md5: 7fba3f90750de3ea820702f084d6586a
      size: 31
    - path: reports/test2.json
      md5: 37595f18679927c6f6f1898564a0147d
      size: 31
    - path: reports/train.json
      md5: 84cb30066ff19d97d788ff810fa9aea6
      size: 31
    - path: reports/val.json
      md5: 0750396ab166f12db54d2c6f685c6dab
      size: 28
  app:
    cmd: python3 big/src/stages/app.py params.yaml
    deps:
    - path: big/src/stages/app.py
      md5: 2272564d30a3ab105969eee7615825e4
      size: 2805
    - path: data/raw/sl_hand
      md5: cfb3e3adb87ae3d064a5791e736a6658.dir
      size: 282910552
      nfiles: 32
    - path: models/skelet_hand_f19.h5
      md5: d04866b7877c6a6743e47cf9fe6d614a
      size: 56656
    - path: models/skelet_hand_f19.json
      md5: 87a56a2619349785ef91a50059c21d35
      size: 71
    outs:
    - path: reports/app.json
      md5: 406f35085320145b9ad55f7ef78bb29c
      size: 53
  reduce_label:
    cmd: python3 big/src/stages/reduce_label.py params.yaml
    deps:
    - path: big/src/stages/reduce_label.py
      md5: caba32dcca9162e450614bceaf749e17
      size: 2984
    - path: data/interim/angle_19f_handshape.csv
      md5: 696f6d024b041984694c7707787825b4
      size: 306352
    - path: data/raw/fsw_handshape.json
      md5: fc38ceb365ab6afea4697799bb89e3eb
      size: 76
    outs:
    - path: data/interim/reduce_label.csv
      md5: 4d66f810187b1f468b84fa8b578fb7d4
      size: 306352
  split_by_folder:
    cmd: python3 big/src/stages/split_by_folder.py params.yaml
    deps:
    - path: big/src/stages/split_by_folder.py
      md5: 13984d5af8ad4cd83fe505cf58673fc8
      size: 1046
    - path: data/interim/reduce_label.csv
      md5: 4d66f810187b1f468b84fa8b578fb7d4
      size: 306352
    outs:
    - path: data/interim/test2.csv
      md5: f775e0121b7f959ff931bd4413812c03
      size: 138360
    - path: data/interim/train_val_test.csv
      md5: c6a4c02cadd5ff7303ea12c2e9a7d332
      size: 168300
  make_imbalance:
    cmd: python3 big/src/stages/make_imbalance.py params.yaml
    deps:
    - path: big/src/stages/make_imbalance.py
      md5: adb4dda59ee17dd8b28a814f01281a79
      size: 5320
    - path: data/interim/train_val_test.csv
      md5: c6a4c02cadd5ff7303ea12c2e9a7d332
      size: 168300
    params:
      params.yaml:
        make_imbalance.method: undersampling_NearMiss
    outs:
    - path: data/interim/train_val_test_balance.csv
      md5: 009b90a7b1365b4254f6a12b0834e5cb
      size: 88321
