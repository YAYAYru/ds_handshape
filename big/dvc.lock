schema: '2.0'
stages:
  json2csv:
    cmd: python3 src/stages/json2csv.py params.yaml
    deps:
    - path: data/interim/sl_hand_json
      md5: 7ea60969d88183efbf3c200af30a1b71.dir
      size: 472771937
      nfiles: 6321
    - path: data/raw/sl_hand_label
      md5: 618e55b4c611188e975317ce37e9441b.dir
      size: 383240
      nfiles: 15
    - path: src/stages/json2csv.py
      md5: 8f36a7a0306756ba350cf1daf1663563
      size: 3153
    outs:
    - path: data/interim/xyz_63f.csv
      md5: 729322b6c584b588291f6841be226140
      size: 450963031
  xyz2angle:
    cmd: python3 src/stages/xyz2angle.py params.yaml
    deps:
    - path: data/interim/xyz_63f.csv
      md5: 729322b6c584b588291f6841be226140
      size: 450963031
    - path: src/stages/xyz2angle.py
      md5: 5f6315adcd759b5dbea0fc8f408d0347
      size: 1093
    outs:
    - path: data/interim/angle_19f.csv
      md5: 7acd831f9aa8adbebe9c327aaf1b1e6e
      size: 143393352
  select_label:
    cmd: python3 src/stages/select_label.py params.yaml
    deps:
    - path: data/interim/angle_19f.csv
      md5: 7acd831f9aa8adbebe9c327aaf1b1e6e
      size: 143393352
    - path: src/stages/select_label.py
      md5: 74a9bb8f9c698804e0e7ce5a85d618e0
      size: 1061
    params:
      params.yaml:
        select_label.list_fsw_orientation:
        - '28'
        - '20'
        - '21'
        - '29'
        - 2f
        - '27'
        - 2a
        - '22'
        - '26'
        - 2e
    outs:
    - path: data/interim/angle_19f_handshape.csv
      md5: 595864f2a50e16c60705c396cce39a30
      size: 26172372
  split_trainval_test:
    cmd: python3 src/stages/split_trainval_test.py params.yaml
    deps:
    - path: data/interim/train_val_test.csv
      md5: f8807f02aff0b3e521a1f47540d2dbc9
      size: 24508067
    - path: src/stages/split_trainval_test.py
      md5: 70d9e4966aefdc4f364b6f47ce9895ab
      size: 1722
    params:
      params.yaml:
        split_trainval_test.random_state: 42
        split_trainval_test.test_size: 0.1
    outs:
    - path: data/processed/test.csv
      md5: a3b8198161665060ac7e1dfdf2fba39d
      size: 2451306
    - path: data/processed/train_val.csv
      md5: 4aeef65f1cf7d62c535c14daa5943c36
      size: 22057069
  train_val_split:
    cmd: python3 src/stages/train_val_split.py params.yaml
    deps:
    - path: data/processed/train_val.csv
      md5: 4aeef65f1cf7d62c535c14daa5943c36
      size: 22057069
    - path: src/stages/train_val_split.py
      md5: 3edb888dfdd4cf9135cc03c67860ee9a
      size: 1513
    params:
      params.yaml:
        train_val_split.random_state: 42
        train_val_split.val_size: 0.1
    outs:
    - path: data/processed/train.csv
      md5: c29675433f513219fa6c246d2c25cf89
      size: 19851471
    - path: data/processed/val.csv
      md5: 4097c9b184da2019ca3394e24cfe4c24
      size: 2205906
  select_features:
    cmd: python3 src/stages/select_features.py params.yaml
    deps:
    - path: data/processed/test.csv
      md5: a3b8198161665060ac7e1dfdf2fba39d
      size: 2451306
    - path: data/processed/train.csv
      md5: c29675433f513219fa6c246d2c25cf89
      size: 19851471
    - path: data/processed/val.csv
      md5: 4097c9b184da2019ca3394e24cfe4c24
      size: 2205906
    - path: src/stages/select_features.py
      md5: aeb474b4fc8d2877bb1acdade83124ca
      size: 2161
    outs:
    - path: data/processed/test_x.npy
      md5: 2bd1ef6a1046a81f039ce06d40df2172
      size: 2133600
    - path: data/processed/test_y.npy
      md5: 90c1962204881a7439b814ef589fe00a
      size: 28779
    - path: data/processed/train_x.npy
      md5: 4747d952321aa88c9b41de4fa4afeda0
      size: 17281008
    - path: data/processed/train_y.npy
      md5: 89a7875fda1b8fb77fff75c577ed9380
      size: 229475
    - path: data/processed/val_x.npy
      md5: b4056593331be85239861c47578b7d40
      size: 1920344
    - path: data/processed/val_y.npy
      md5: 27b21c14167265a7d3942e6948d26b71
      size: 25969
  to_categorical:
    cmd: python3 src/stages/to_categorical.py params.yaml
    deps:
    - path: data/processed/test_y.npy
      md5: 90c1962204881a7439b814ef589fe00a
      size: 28779
    - path: data/processed/train_y.npy
      md5: 89a7875fda1b8fb77fff75c577ed9380
      size: 229475
    - path: data/processed/val_y.npy
      md5: 27b21c14167265a7d3942e6948d26b71
      size: 25969
    - path: src/stages/to_categorical.py
      md5: abe6a5e88b92572aec81cd32c2bd7e5e
      size: 2028
    outs:
    - path: data/processed/test_y_encoder.npy
      md5: 80b34d364ed1a8350b409b4f13efdf25
      size: 112416
    - path: data/processed/train_y_encoder.npy
      md5: 43ed6e25549ad9c628ee2a40e929114a
      size: 909648
    - path: data/processed/val_y_encoder.npy
      md5: 2c5693ec10e361172fb5746f7a28f2f6
      size: 101192
    - path: models/skelet_hand_f19.json
      md5: f7f62bee2f36a3f9b7e828e34d5e4573
      size: 727
  train:
    cmd: python3 src/stages/train.py params.yaml
    deps:
    - path: data/processed/train_x.npy
      md5: 4747d952321aa88c9b41de4fa4afeda0
      size: 17281008
    - path: data/processed/train_y_encoder.npy
      md5: 43ed6e25549ad9c628ee2a40e929114a
      size: 909648
    - path: data/processed/val_x.npy
      md5: b4056593331be85239861c47578b7d40
      size: 1920344
    - path: data/processed/val_y_encoder.npy
      md5: 2c5693ec10e361172fb5746f7a28f2f6
      size: 101192
    - path: src/stages/train.py
      md5: 17efd98b9f1e732052f5b5821232a87b
      size: 3121
    params:
      params.yaml:
        train.epochs: 1200
    outs:
    - path: models/skelet_hand_f19.h5
      md5: 13a9b8014859346a65a6ab4268a1a9c5
      size: 69800
    - path: reports/train_history.csv
      md5: 390d7de8ad89fd117af30431ddba7db4
      size: 97638
  predict:
    cmd: python3 src/stages/predict.py params.yaml
    deps:
    - path: data/processed/test_x.npy
      md5: 2bd1ef6a1046a81f039ce06d40df2172
      size: 2133600
    - path: data/processed/train_x.npy
      md5: 4747d952321aa88c9b41de4fa4afeda0
      size: 17281008
    - path: data/processed/val_x.npy
      md5: b4056593331be85239861c47578b7d40
      size: 1920344
    - path: models/skelet_hand_f19.h5
      md5: 13a9b8014859346a65a6ab4268a1a9c5
      size: 69800
    - path: src/stages/predict.py
      md5: 2a495d577f3c153d20830c473894a5fa
      size: 3669
    outs:
    - path: data/processed/test_y_pred.npy
      md5: 1230a98034a7720c461c6c9c1e015e3c
      size: 224704
    - path: data/processed/test_y_pred_proba.npy
      md5: c265fb570c9a1c5fac8a2e1556d942cb
      size: 2470464
    - path: data/processed/train_y_pred.npy
      md5: f970ac2aa947b2bc39fc843cb72b5d9a
      size: 1819168
    - path: data/processed/train_y_pred_proba.npy
      md5: f52ae45544036b29c3f3e219204e225c
      size: 20009568
    - path: data/processed/val_y_pred.npy
      md5: e6ebbd094e85ba9d84b24e0f50720b54
      size: 202256
    - path: data/processed/val_y_pred_proba.npy
      md5: 939d6861b94faaa7e3733b9def7ce0b6
      size: 2223536
  evaluate:
    cmd: python3 src/stages/evaluate.py params.yaml
    deps:
    - path: data/processed/test_y.npy
      md5: 90c1962204881a7439b814ef589fe00a
      size: 28779
    - path: data/processed/test_y_pred.npy
      md5: 1230a98034a7720c461c6c9c1e015e3c
      size: 224704
    - path: data/processed/test_y_pred_proba.npy
      md5: c265fb570c9a1c5fac8a2e1556d942cb
      size: 2470464
    - path: data/processed/train_y.npy
      md5: 89a7875fda1b8fb77fff75c577ed9380
      size: 229475
    - path: data/processed/train_y_pred.npy
      md5: f970ac2aa947b2bc39fc843cb72b5d9a
      size: 1819168
    - path: data/processed/train_y_pred_proba.npy
      md5: f52ae45544036b29c3f3e219204e225c
      size: 20009568
    - path: data/processed/val_y.npy
      md5: 27b21c14167265a7d3942e6948d26b71
      size: 25969
    - path: data/processed/val_y_pred.npy
      md5: e6ebbd094e85ba9d84b24e0f50720b54
      size: 202256
    - path: data/processed/val_y_pred_proba.npy
      md5: 939d6861b94faaa7e3733b9def7ce0b6
      size: 2223536
    - path: src/stages/evaluate.py
      md5: 81288ca4feef6991282e43049c915ebd
      size: 7483
    outs:
    - path: reports/test.json
      md5: 4ef24a7142f15910ec86144d7e6e3e3c
      size: 31
    - path: reports/train.json
      md5: d1dbb73c7c224ff178e860571e4e2dae
      size: 31
    - path: reports/val.json
      md5: 554ae0fdf5eda2baa36526384305f8e2
      size: 31
  app:
    cmd: python3 src/stages/app.py params.yaml
    deps:
    - path: data/raw/sl_hand
      md5: cfb3e3adb87ae3d064a5791e736a6658.dir
      size: 282910552
      nfiles: 32
    - path: models/skelet_hand_f19.h5
      md5: 13a9b8014859346a65a6ab4268a1a9c5
      size: 69800
    - path: models/skelet_hand_f19.json
      md5: f7f62bee2f36a3f9b7e828e34d5e4573
      size: 727
    - path: src/stages/app.py
      md5: 2272564d30a3ab105969eee7615825e4
      size: 2805
    outs:
    - path: reports/app.json
      md5: 75a0033c32f9285839345d43938c41c0
      size: 53
  reduce_label:
    cmd: python3 src/stages/reduce_label.py params.yaml
    deps:
    - path: data/interim/angle_19f_handshape.csv
      md5: 595864f2a50e16c60705c396cce39a30
      size: 26172372
    - path: data/raw/fsw_handshape.json
      md5: a8dafa55e11fd34e5659fd1e83ad0c98
      size: 1714
    - path: src/stages/reduce_label.py
      md5: caba32dcca9162e450614bceaf749e17
      size: 2984
    outs:
    - path: data/interim/reduce_label.csv
      md5: 9e630fc184634a8009ef8ad07e77df1a
      size: 26172372
  split_by_folder:
    cmd: python3 src/stages/split_by_folder.py params.yaml
    deps:
    - path: data/interim/reduce_label.csv
      md5: 9e630fc184634a8009ef8ad07e77df1a
      size: 26172372
    - path: src/stages/split_by_folder.py
      md5: 13984d5af8ad4cd83fe505cf58673fc8
      size: 1046
    outs:
    - path: data/interim/test2.csv
      md5: 513bcef6a9da6cc91534b35130f972b5
      size: 1664613
    - path: data/interim/train_val_test.csv
      md5: f8807f02aff0b3e521a1f47540d2dbc9
      size: 24508067
